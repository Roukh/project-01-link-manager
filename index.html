<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Manager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Link Manager <span id="linkCount">(0)</span></h1>
            <p>Organize and Tag your Links</p>
        </header>

        <section id="addLinkSection">
            <h2>Add New Link</h2>
            <form id="linkForm">
                <div class="form-group">
                    <label for="url">URL</label>
                    <input type="url" id="url" placeholder="https://example.com" required>
                </div>
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" placeholder="My Awesome Link" required>
                </div>
                <div class="form-group">
                    <label for="tags">Tags (comma-separated)</label>
                    <input type="text" id="tags" placeholder="work, tutorial, reference">
                </div>
                <div class="form-group">
                    <label for="description">Description (optional)</label>
                    <textarea id="description" placeholder="Add a description for this link..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="folder">Folder (optional)</label>
                    <select id="folder">
                        <option value="">Your Links (Root)</option>
                        <!-- Folders will be populated here -->
                    </select>
                </div>
                <button type="submit" class="btn-primary">Add Link</button>
            </form>
        </section>

        <section id="filterSection">
            <h2>Filter by Tag</h2>
            <div class="filter-controls" id="tagFilters">
                <!-- Tag filter buttons will be inserted here -->
            </div>
        </section>

        <section id="linksSection">
            <div class="section-header">
                <h2>Your Links</h2>
                <div class="section-controls">
                    <button id="createFolderBtn" class="btn-secondary">+ Create Folder</button>
                    <select id="sortBy" class="sort-select">
                        <option value="date">Sort by Date</option>
                        <option value="alpha">Sort Alphabetically</option>
                        <option value="items">Sort by Item Count</option>
                    </select>
                </div>
            </div>
            <div id="breadcrumbs" class="breadcrumbs"></div>
            <div class="links-grid" id="linksContainer">
                <!-- Links and folders will be inserted here -->
            </div>
        </section>
    </div>

    <!-- Edit Link Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Link</h2>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <form id="editLinkForm">
                <div class="form-group">
                    <label for="editUrl">URL</label>
                    <input type="url" id="editUrl" required>
                </div>
                <div class="form-group">
                    <label for="editTitle">Title</label>
                    <input type="text" id="editTitle" required>
                </div>
                <div class="form-group">
                    <label for="editTags">Tags (comma-separated)</label>
                    <input type="text" id="editTags">
                </div>
                <div class="form-group">
                    <label for="editDescription">Description (optional)</label>
                    <textarea id="editDescription" placeholder="Add a description for this link..." rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelEdit">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Folder Modal -->
    <div id="folderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Folder</h2>
                <button class="modal-close" id="closeFolderModal">&times;</button>
            </div>
            <form id="createFolderForm">
                <div class="form-group">
                    <label for="folderName">Folder Name</label>
                    <input type="text" id="folderName" placeholder="My Folder" required>
                </div>
                <div class="form-group">
                    <label for="folderDescription">Description (optional)</label>
                    <textarea id="folderDescription" placeholder="Add a description for this folder..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="parentFolder">Location</label>
                    <select id="parentFolder">
                        <option value="">Your Links (Root)</option>
                        <!-- Folders will be populated here -->
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelFolder">Cancel</button>
                    <button type="submit" class="btn-primary">Create Folder</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Folder Modal -->
    <div id="editFolderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Folder</h2>
                <button class="modal-close" id="closeEditFolderModal">&times;</button>
            </div>
            <form id="editFolderForm">
                <div class="form-group">
                    <label for="editFolderName">Folder Name</label>
                    <input type="text" id="editFolderName" placeholder="My Folder" required>
                </div>
                <div class="form-group">
                    <label for="editFolderDescription">Description (optional)</label>
                    <textarea id="editFolderDescription" placeholder="Add a description for this folder..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="editParentFolder">Location</label>
                    <select id="editParentFolder">
                        <option value="">Your Links (Root)</option>
                        <!-- Folders will be populated here -->
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelEditFolder">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Move Link Modal -->
    <div id="moveLinkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Move Link to Folder</h2>
                <button class="modal-close" id="closeMoveLinkModal">&times;</button>
            </div>
            <form id="moveLinkForm">
                <div class="form-group">
                    <label for="moveLinkFolder">Select Folder</label>
                    <select id="moveLinkFolder">
                        <option value="">Your Links (Root)</option>
                        <!-- Folders will be populated here -->
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelMoveLink">Cancel</button>
                    <button type="submit" class="btn-primary">Move Link</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script type="module" src="app.js"></script>
</body>
</html>
